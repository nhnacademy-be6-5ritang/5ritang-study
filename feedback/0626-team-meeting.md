# 0626 팀 미팅 피드백

- 작가 검색이 가능케 하기 위해서는 작가↔도서 테이블을 m:n 연결
- “예외 처리 등으로 충분히 막을 수 있지만 데이터베이스 설계에서부터 막을 수 있다면 그렇게 하라”

  → 내가 구매하지 않은 도서에 댓글을 달 가능성이 없지 않다

  → 리뷰를 도서에 연결하지 말고 주문에 연결하라

- 쿠폰↔사용자 쿠폰 테이블이 1:n 관계가 맞을까?

  → 쿠폰 페이지에서 사용자가 직접 쿠폰을 선택해가는 방식

  → 못 들음

- 회원을 식별하려면 PK로 외래키를 참조시켜야함
- 이메일 쓰지마, 주식별자가 있는데 왜 보조식별자를 쓸 필요가 없지
- 회원번호(auto increment, 관련 숫자 등), UUID 등등의 인조키를 PK로 하면 이 인조키를 통해 식별할 수가 없기 때문에 노출이 되어야 하는 상황이라면 해라.
- /users/{id}는 관리자용 API 경로가 어울린다
- /users/me 이런 식도 괜찮다, 토큰으로 사용자를 식별하고 해당 사용자에 대한 데이터를 추출할 수 있다.
- 숫자 index와 문자 index의 차이는?

  → 숫자는 비교가 수월하여 조회 속도가 빠름

  → 문자는 숫자처럼 비교가 쉽지 아니하고 정렬을 해야함

    - 트리 구조의 데이터베이스에서 중간에 하나가 삭제되면 이 index(PK)를 기준으로 다시 재정렬해야하는데 이에 쉬운 구조여야 좋다

  → mysql에서 index로 문자를 썼다고 성능이 크게 나빠지는 건 아니지만 무튼 숫자가 유리하다

  → 외래키에 참조되는 애는 auto_increment 같이 연산이 빠른 애로, 외부에서 조회할 때 등에는 uuid로 사용해보는 것도 괜찮을 것이다.

    <aside>
    💡 mysql 내부 구조 + indexing 방식 공부
    RSA, 암호화 방법도 알아두면 좋겠지.……….
    RSA, 비대칭키는 중앙에서 관리되기 떄문에 관리자 입장에서 편리하다(?)
    Spring config cloud server (외부 API에게 비밀번호를 요청할 수 있다) - 나중에 해봐
    JPA의 쿼리문을 보며 index를 타는지, N + 1은 발생하지 않는지 등을 확인 → workbench explain plan
    sonarqube를 사용한 이유? → 그저 테스트 커버리지 확인이 아닌 배포 전에 우리들의 코드가 얼마나 관리되고 있는지(중복 코드 등)와 테스트 커버리지를 확인하며 테스트 코드를 잘 짰는지 확인하는 과정이다.

    </aside>

- 무신사에서처럼 디지털 쿠폰이더라도 사용자가 발급을 받으면, 이 쿠폰을 발급 받은 사람들끼리는 같은 쿠폰을 공유하는 것이 아닌, 각자 같은 종류의 쿠폰은 갖지만 쿠폰ID가 다른 서로 다른 쿠폰을 가지고 있는 것이다.
- 쿠폰 사용 여부도 확인하려면 쿠폰 ID 고유 값이어야만 한다.
- mysql에서 enum을 사용하지 않는 이유는 mysql의 스키마가 변경되면 단순 수정이 아닌, 스키마를 똑같이 복제 추가하며 수정된다.
- 결제 정보 저장할까? 말까? → 상담원이 필요할 때 사용자 주문 내역을 단 번에 조회하는 등의 관리가 필요한데 이를 toss payments에 의존해서는 안 된다.
- “PR 올리기 전에, 유효성 검사, JavaDoc, 테스트 코드 등을 마치고 올려야 한다”
- JSON request, response 형태 및 형식 지정
- 에러페이지는 생성하지 말고 error modal 창을 만들어주자(input 초기화 방지)
- datasource: data type true → 이걸 해야 hikari가 동작하지 않는다
- test on borrow: true ↔ validation query: SELECT ! 충돌
- 할 일 목록에서 지연이 되면 **우선 순위**를 정하라.
- **회고록??????????????????????????????**
- application 실행 로그를 확인하고 스크립트에서 메시지가 확인되면 (tl -pf?) 다음 B서버 실행
- nginx.conf 파일을 스크립트로 직접 수정할 수 있다!