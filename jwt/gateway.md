# 왜 게이트웨이에서 JWT 검증?

JWT 검증을 어디서 하는 것이 가장 좋은지에 대해 여러 가지 고려사항이 있습니다. 각 선택지의 장단점을 비교해보겠습니다.

### 1. JWT 검증 위치의 선택지

1. **클라우드 게이트웨이에서 검증**
2. **인증 서버에서 검증**
3. **애플리케이션 서버에서 검증**

### 1. 클라우드 게이트웨이에서 검증

### 장점

1. **중앙집중식 검증**: 모든 요청이 게이트웨이를 통과하므로 중앙에서 일괄적으로 검증할 수 있습니다.
2. **단일 책임 원칙**: 각 애플리케이션 서버가 인증 관련 로직을 신경 쓰지 않아도 됩니다.
3. **부하 감소**: 각 애플리케이션 서버로 전달되는 요청이 이미 검증된 상태이므로 불필요한 검증 로직을 줄일 수 있습니다.
4. **일관성**: 모든 서비스에 일관된 보안 정책을 적용할 수 있습니다.

### 단점

1. **단일 장애점**: 게이트웨이에 문제가 생기면 전체 시스템에 영향을 미칠 수 있습니다.
2. **확장성 문제**: 트래픽이 많아지면 게이트웨이의 부하가 커질 수 있습니다.

### 2. 인증 서버에서 검증

### 장점

1. **전문성**: 인증 서버가 모든 인증 관련 로직을 처리하므로 보안 전문가가 보안을 집중 관리할 수 있습니다.
2. **독립성**: 애플리케이션 서버는 인증에 신경 쓰지 않고 비즈니스 로직에 집중할 수 있습니다.

### 단점

1. **요청 지연**: 모든 요청마다 인증 서버를 거쳐야 하므로 네트워크 지연이 발생할 수 있습니다.
2. **단일 장애점**: 인증 서버에 문제가 생기면 전체 시스템에 영향을 미칠 수 있습니다.

### 3. 애플리케이션 서버에서 검증

### 장점

1. **분산 처리**: 각 서버가 독립적으로 검증하므로 부하가 분산됩니다.
2. **확장성**: 애플리케이션 서버를 독립적으로 확장할 수 있습니다.

### 단점

1. **코드 중복**: 각 애플리케이션 서버에 JWT 검증 로직이 중복될 수 있습니다.
2. **관리 복잡성**: 모든 서버에 동일한 보안 정책을 유지해야 하므로 관리가 복잡해질 수 있습니다.

### 최적의 선택: 클라우드 게이트웨이에서 검증

### 근거

1. **중앙집중식 검증**: 모든 요청이 클라우드 게이트웨이를 통과하므로, JWT 검증을 중앙에서 일괄적으로 처리할 수 있습니다. 이는 일관된 보안 정책 적용을 가능하게 합니다.
2. **단일 책임 원칙**: 애플리케이션 서버와 인증 서버는 각각 비즈니스 로직과 인증 로직에 집중할 수 있습니다. 보안 관련 로직을 게이트웨이에서 처리함으로써 각 서비스의 책임이 명확해집니다.
3. **부하 분산**: 게이트웨이에서 JWT 검증을 처리하면 애플리케이션 서버로 전달되는 요청은 이미 검증된 상태이므로, 애플리케이션 서버의 부하를 줄일 수 있습니다.
4. **확장성**: 클라우드 게이트웨이는 수평 확장이 용이하므로, 트래픽이 증가해도 검증 부하를 분산할 수 있습니다. 또한, 게이트웨이의 로드 밸런싱 기능을 통해 부하를 효과적으로 관리할 수 있습니다.
5. **관리 용이성**: 보안 정책과 검증 로직을 중앙에서 관리하므로, 코드 중복 문제를 방지하고 보안 정책의 일관성을 유지할 수 있습니다.

### 결론

JWT 검증을 클라우드 게이트웨이에서 처리하는 것이 가장 효율적이고 일관된 보안 정책을 유지할 수 있는 방법입니다. 클라우드 게이트웨이를 통해 중앙집중식으로 검증을 수행함으로써 보안, 확장성, 관리 용이성 측면에서 많은 이점을 얻을 수 있습니다.

다만, 클라우드 게이트웨이의 단일 장애점 문제를 해결하기 위해 게이트웨이를 다중화하거나 로드 밸런싱을 적용하여 고가용성을 확보하는 것도 고려해야 합니다.